@using HiBlazor.SPA.Services;
@inject NotificationService NotificationService
@inject NavigationManager NavigationManager
@inject UserService UserService

@if (isLogin)
{
    <RadzenButton Variant="Variant.Text" Click=@Out Text="Çıkış Yap" ButtonStyle="ButtonStyle.Danger" />
}
else
{
    <RadzenButton Variant="Variant.Text" Click=@Login Text="Giriş Yap" ButtonStyle="ButtonStyle.Success" />
    <RadzenButton Variant="Variant.Text" Click=@Register Text="Kayıt Ol" ButtonStyle="ButtonStyle.Primary" />
}

@code {
    public bool isLogin { get; set; }

    public void UpdateState()
    {
        //isLogin = await Http.GetFromJsonAsync<bool>("users/islogin");
        isLogin = true;// UserService.IsLogin();
        // StateHasChanged();
    }

    private  void Out()
    {
        UserService.LogOut();
        NotificationService.Notify(new NotificationMessage { Severity = NotificationSeverity.Info, Summary = "Çıkış yapıldı!"});
        NavigationManager.NavigateTo("login");
    }

    private void Login()
    {
        NavigationManager.NavigateTo("login");
    } 
    private void Register()
    {
        NavigationManager.NavigateTo("register");
    }
}
